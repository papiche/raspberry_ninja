Warning: RoomRecordingManager not available. Room recording will use fallback mode.
[38;5;51m
╔═══════════════════════════════════════════════╗[0m
[38;5;51m║          🥷 Raspberry Ninja                   ║[0m
[38;5;51m║     Multi-Platform WebRTC Publisher           ║[0m
[38;5;51m╚═══════════════════════════════════════════════╝
[0m
[38;5;123m
-> Recording all streams from room: [38;5;219mtestroom123999999999[0m
[38;5;105m   Files will be saved as: testroom123999999999_<streamID>_<timestamp>.ts[0m

Available options include --noaudio, --ndiout, --record and --server. See --help for more options.
[38;5;46m
🎬 Room Recording Mode (WebRTC Subprocess Architecture)[0m
[38;5;46m   Using single WebSocket connection with subprocess WebRTC handlers[0m
[38;5;105m   This provides proper signaling coordination between streams[0m
[38;5;51m🔌 Connecting to handshake server...[0m
[38;5;231m   ├─ Trying standard SSL to wss://wss.vdo.ninja:443[0m
[38;5;46m   └─ ✅ Connected successfully![0m
[38;5;155m=> a message was sent via websockets 1: {"request": "joinroom", "roomid": "testroom123999999999", "s[0m
[38;5;155m=> joining room[0m
[38;5;46m✅ WebSocket ready[0m
[38;5;120mRoom has 3 members[0m
[38;5;105m  - Stream: tUur6wt[0m
[38;5;105m  - Stream: tUur6fffwt[0m
[38;5;226mRoom recording mode: True[0m
[38;5;46m🚀 Room recording mode - will record all streams[0m
[38;5;123mFound 2 streams to record[0m
[38;5;46m
📹 Creating subprocess recorder for stream: tUur6wt[0m
[38;5;105m[Subprocess] Mapping UUID 8f687410-bfee-4210-b2b0-d2e753536421 to stream tUur6wt[0m
[38;5;105m[tUur6wt] Using default TURN server for subprocess.[0m
[38;5;105m[tUur6wt] DEBUG: Creating subprocess with record_audio=True (noaudio=False)[0m
[38;5;46m[tUur6wt] Using MKV recording with audio/video muxing[0m
[38;5;105m[tUur6wt] Starting GLib main loop...[0m
[38;5;46m[tUur6wt] Subprocess ready[0m
[38;5;155m=> a message was sent via websockets 1: {"request": "play", "streamID": "tUur6wt", "UUID": "8f687410[0m
[38;5;46m[tUur6wt] Subprocess started. Sent play request for UUID 8f687410-bfee-4210-b2b0-d2e753536421.[0m
[38;5;46m
📹 Creating subprocess recorder for stream: tUur6fffwt[0m
[38;5;105m[Subprocess] Mapping UUID 240ceb0e-0d11-4a2a-bed8-90b552f7f0cd to stream tUur6fffwt[0m
[38;5;105m[tUur6fffwt] Using default TURN server for subprocess.[0m
[38;5;105m[tUur6fffwt] DEBUG: Creating subprocess with record_audio=True (noaudio=False)[0m
[38;5;46m[tUur6fffwt] Using MKV recording with audio/video muxing[0m
[38;5;105m[tUur6fffwt] Starting GLib main loop...[0m
[38;5;46m[tUur6fffwt] Subprocess ready[0m
[38;5;155m=> a message was sent via websockets 1: {"request": "play", "streamID": "tUur6fffwt", "UUID": "240ce[0m
[38;5;46m[tUur6fffwt] Subprocess started. Sent play request for UUID 240ceb0e-0d11-4a2a-bed8-90b552f7f0cd.[0m
[38;5;105m[Room Recording] Mapped session C6CHKppdLu to stream tUur6wt (from client session update)[0m
[38;5;46m[Subprocess] Routing offer for UUID 8f687410-bfee-4210-b2b0-d2e753536421 to stream tUur6wt (session: C6CHKppdLu)[0m
[38;5;105m[tUur6wt] Starting pipeline on first offer/sdp message[0m
[38;5;105m[tUur6wt] STUN server: stun://stun.cloudflare.com:3478[0m
[38;5;105m[tUur6wt] TURN server configured[0m
[38;5;105m[tUur6wt] 🎬 Recording setup complete: testroom123999999999_tUur6wt_1750406074.mkv[0m
[38;5;105m[tUur6wt] Negotiation needed signal received[0m
[38;5;105m[tUur6wt] Pipeline started and playing[0m
[38;5;105m[tUur6wt] Processing remote offer[0m
[38;5;105m[Room Recording] Mapped session krjUiHCv2h to stream tUur6fffwt (from client session update)[0m
[38;5;46m[Subprocess] Routing offer for UUID 240ceb0e-0d11-4a2a-bed8-90b552f7f0cd to stream tUur6fffwt (session: krjUiHCv2h)[0m
[38;5;105m[tUur6fffwt] Starting pipeline on first offer/sdp message[0m
[38;5;105m[Subprocess] Routing 8 ICE candidate(s) for UUID 240ceb0e-0d11-4a2a-bed8-90b552f7f0cd to stream tUur6fffwt[0m
[38;5;105m[tUur6fffwt] STUN server: stun://stun.cloudflare.com:3478[0m
[38;5;105m[tUur6fffwt] TURN server configured[0m
[38;5;105m[tUur6fffwt] 🎬 Recording setup complete: testroom123999999999_tUur6fffwt_1750406074.mkv[0m
[38;5;105m[tUur6fffwt] Negotiation needed signal received[0m
[38;5;105m[tUur6fffwt] Pipeline started and playing[0m
[38;5;105m[tUur6fffwt] Processing remote offer[0m
[38;5;105m[Subprocess] Routing 24 ICE candidate(s) for UUID 8f687410-bfee-4210-b2b0-d2e753536421 to stream tUur6wt[0m
[38;5;105m[tUur6wt] Remote description set, creating answer[0m
[38;5;105m[tUur6wt] ICE gathering state: GST_WEBRTC_ICE_GATHERING_STATE_GATHERING[0m
[38;5;105m[tUur6wt] Local description set successfully[0m
[38;5;105m[tUur6wt] Answer sent to parent process[0m
[38;5;105m[tUur6wt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Remote description set, creating answer[0m
[38;5;105m[tUur6fffwt] Local description set successfully[0m
[38;5;105m[tUur6fffwt] Answer sent to parent process[0m
[38;5;105m[tUur6fffwt] ICE gathering state: GST_WEBRTC_ICE_GATHERING_STATE_GATHERING[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[Subprocess] Routing 16 ICE candidate(s) for UUID 240ceb0e-0d11-4a2a-bed8-90b552f7f0cd to stream tUur6fffwt[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6fffwt] Added ICE candidate for mline 0[0m
[38;5;105m[tUur6wt] ICE gathering state: GST_WEBRTC_ICE_GATHERING_STATE_COMPLETE[0m
[38;5;105m[tUur6fffwt] ICE gathering state: GST_WEBRTC_ICE_GATHERING_STATE_COMPLETE[0m
[38;5;208m
🛑 Received interrupt signal, shutting down gracefully...[0m
[38;5;226mCleaning up pipeline and resources...[0m
[38;5;105mStopping subprocess recorders...[0m
[38;5;105mStopping subprocess: tUur6wt[0m
[38;5;105m[tUur6wt] Subprocess stopped[0m
[38;5;105mStopping subprocess: tUur6fffwt[0m
[38;5;105m[tUur6fffwt] Subprocess stopped[0m
[38;5;210m🛑 Stopping pipeline for viewer[0m
[38;5;226mFailed to cleanup webrtc element: '8f687410-bfee-4210-b2b0-d2e753536421'[0m
[38;5;226mFailed to cleanup audio queue: '8f687410-bfee-4210-b2b0-d2e753536421'[0m
[38;5;226mFailed to cleanup video queue: '8f687410-bfee-4210-b2b0-d2e753536421'[0m
[38;5;210m🛑 Stopping pipeline for viewer[0m
[38;5;226mFailed to cleanup webrtc element: '240ceb0e-0d11-4a2a-bed8-90b552f7f0cd'[0m
[38;5;226mFailed to cleanup audio queue: '240ceb0e-0d11-4a2a-bed8-90b552f7f0cd'[0m
[38;5;226mFailed to cleanup video queue: '240ceb0e-0d11-4a2a-bed8-90b552f7f0cd'[0m
